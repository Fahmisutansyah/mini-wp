<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
      integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
      crossorigin="anonymous"
    />
    <script src="https://cdn.jsdelivr.net/npm/vue"></script>
    <link
      type="text/css"
      rel="stylesheet"
      href="//unpkg.com/bootstrap/dist/css/bootstrap.min.css"
    />
    <link
      type="text/css"
      rel="stylesheet"
      href="//unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.min.css"
    />
    <title>Mini Wp</title>
    <!-- axios -->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="//unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.min.js"></script>
    <!-- moment  -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.20.1/moment.min.js"></script>
    <!-- ck editor -->
    <script src="../node_modules/@ckeditor/ckeditor5-build-classic/build/ckeditor.js"></script>
    <script src="../node_modules/@ckeditor/ckeditor5-vue/dist/ckeditor.js"></script>
    <!-- swal -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@8"></script>
  </head>

  <body>
    <div class="contrainer" id="app">
      <nav
        class="navbar navbar-expand-lg navbar-light"
        style="background-color: #14213D "
      >
        <a class="navbar-brand" href="#" style="color:#FCA311"
          ><i class="fab fa-wordpress" style="font-size: 30px"></i
        ></a>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item">
              <a class="nav-link" href="#" style="color:white"
                ><i class="far fa-newspaper" style="font-size: 20px"></i>
                Mini.</a
              >
            </li>
          </ul>

          <b-button
            v-b-modal.article-form
            class="btn btn-light mx-2"
            v-show="isLogin"
            ><i class="fas fa-feather-alt"></i> Write</b-button
          >
          <b-button
            class="btn btn-secondary mx-2"
            type="button"
            v-show="isLogin"
            @click="logout"
            ><i class="fas fa-sign-out-alt"></i> Sign Out</b-button
          >
        </div>
      </nav>
      <!-- login form -->
      <div class="container" v-if="!isLogin" style="padding: 100px">
        <div class="row d-flex justify-content-center">
          <h1>Welcome</h1>
        </div>
        <div class="row d-flex justify-content-center pt-5">
          <b-form @submit.prevent="login">
            <b-form-group
              id="email-label"
              label="Email address:"
              label-for="user-email"
              description="We'll never share your email with anyone else."
            >
              <b-form-input
                id="user-email"
                v-model="userLogin.email"
                type="email"
                required
                placeholder="Enter email"
              ></b-form-input>
            </b-form-group>
            <b-form-group
              id="password-label"
              label="Password:"
              label-for="password-input"
              description="We'll never share your password with anyone else."
            >
              <b-form-input
                id="password-input"
                v-model="userLogin.password"
                type="password"
                required
                placeholder="Enter password"
              ></b-form-input>
            </b-form-group>
            <div class="d-flex justify-content-around">
              <b-button class="mt-3" type="submit" variant="success"
                >Login</b-button
              >
              <small class="pt-4">or</small>
              <b-button class="mt-3" variant="primary">Register!</b-button>
            </div>
          </b-form>
        </div>
      </div>
      <!-- home -->
      <div class="container-fluid" v-show="isLogin">
        <div class="row">
          <div class="col col-md-2 pl-0">
            <div class="list-group">
              <a href="#" class="list-group-item list-group-item-action"
                ><i class="fas fa-tv mx-3"></i>View Site</a
              >
              <a href="#" class="list-group-item list-group-item-action"
                ><i class="fas fa-history mx-3"></i>Activity</a
              >
              <a href="#" class="list-group-item list-group-item-action"
                ><i class="far fa-chart-bar mx-3"></i>Stats</a
              >
            </div>
          </div>
          <div class="col col-md-9 pt-3">
            <div>
              <b-tabs content-class="mt-3">
                  <!-- published contents -->
                <b-tab title="Published" active>
                  <div class="container" style="overflow:scroll; height: 70vh">
                    <div v-for="article in publishedArticles">
                      <b-card
                        :img-src="article.image"
                        img-alt="Card image"
                        img-left
                        class="mb-3"
                        :title="article.title"
                        :sub-title="`By ${article.author}`"
                      >
                        <b-card-text>{{ article.shortContent }}</b-card-text>
                        <div class="d-flex justify-content-end">
                          <b-button
                            :id="`read-button-${article.id}`"
                            class="mx-2"
                            variant="light"
                            v-b-modal.one-article
                            @click="getOneArticle(article)"
                            style="background-color: #FCA311"
                            ><i
                              class="fas fa-book-open"
                              style="font-size:25px"
                            ></i
                          ></b-button>
                          <b-popover
                            :target="`read-button-${article.id}`"
                            placement="bottomleft"
                            title="Read"
                            triggers="hover"
                            :content="`Read ${article.title}`"
                          ></b-popover>
                          <b-button
                            :id="`delete-button-${article.id}`"
                            class="mx-2"
                            variant="danger"
                            ><i
                              class="fas fa-trash-alt"
                              style="font-size:20px"
                            ></i
                          ></b-button>
                          <b-popover
                            :target="`delete-button-${article.id}`"
                            placement="bottomleft"
                            triggers="hover"
                            title="Delete"
                            :content="`Delete ${article.title}`"
                          ></b-popover>
                        </div>
                        <div class="d-flex justify-content-end pt-2">
                          <small>Created At: {{ article.created }}</small>
                        </div>
                        <div class="d-flex justify-content-end">
                            <small>Published At: {{ article.datePublished }}</small>
                        </div>
                      </b-card>
                    </div>
                  </div>
                </b-tab>
                <b-tab title="Drafts">
                    <!-- draft contents -->
                  <div class="container" style="overflow:scroll; height: 70vh">
                    <div v-for="article in draftArticles">
                      <b-card
                        :img-src="article.image"
                        img-alt="Card image"
                        img-left
                        class="mb-3"
                        :title="article.title"
                        :sub-title="`By ${article.author}`"
                      >
                        <b-card-text>{{ article.shortContent }}</b-card-text>
                        <div class="d-flex justify-content-end">
                          <b-button
                            :id="`read-button-${article.id}`"
                            class="mx-2"
                            variant="light"
                            v-b-modal.one-article
                            @click="getOneArticle(article)"
                            style="background-color: #FCA311"
                            ><i
                              class="fas fa-book-open"
                              style="font-size:25px"
                            ></i
                          ></b-button>
                          <b-popover
                            :target="`read-button-${article.id}`"
                            placement="bottomleft"
                            title="Read"
                            triggers="hover"
                            :content="`Read ${article.title}`"
                          ></b-popover>
                          <b-button
                            :id="`delete-button-${article.id}`"
                            class="mx-2"
                            variant="danger"
                            @click="deleteArticle(article)"
                            ><i
                              class="fas fa-trash-alt"
                              style="font-size:20px"
                            ></i
                          ></b-button>
                          <b-popover
                            :target="`delete-button-${article.id}`"
                            placement="bottomleft"
                            triggers="hover"
                            title="Delete"
                            :content="`Delete ${article.title}`"
                          ></b-popover>
                          <b-button
                            :id="`edit-button-${article.id}`"
                            class="mx-2"
                            variant="info"
                            ><i
                              class="fas fa-pen-fancy"
                              style="font-size:20px"
                            ></i
                          ></b-button>
                          <b-popover
                            :target="`edit-button-${article.id}`"
                            placement="bottomleft"
                            title="Edit"
                            triggers="hover"
                            :content="`Edit ${article.title}`"
                          ></b-popover>
                          <b-button
                            :id="`publish-button-${article.id}`"
                            class="mx-2"
                            variant="success"
                            ><i class="fas fa-upload" style="font-size:20px"></i
                          ></b-button>
                          <b-popover
                            :target="`publish-button-${article.id}`"
                            placement="bottomleft"
                            title="Publish"
                            triggers="hover"
                            :content="`Publish ${article.title}`"
                          ></b-popover>
                        </div>
                        <div class="d-flex justify-content-end pt-2">
                          <small>Created At: {{ article.created }}</small>
                        </div>
                        <div class="d-flex justify-content-end">
                          <small>{{ article.daysAgo }}</small>
                        </div>
                      </b-card>
                    </div>
                  </div>
                </b-tab>
              </b-tabs>
            </div>
          </div>
        </div>
      </div>
      <!-- article modal -->
      <b-modal
        id="one-article"
        :title="oneArticle.title"
        no-close-on-backdrop
        centered
      >
        <div style="overflow:scroll; height: 60vh">
          <div class="card">
            <img
              class="card-img-top"
              :src="oneArticle.image"
              alt="Card image cap"
            />
            <div class="card-body">
              <p class="card-text" v-html="oneArticle.content"></p>
            </div>
          </div>
        </div>
        <modal-footer>
          <div class="d-flex justify-content-end" style="margin-top: 15px">
            <small>{{ oneArticle.author }}</small>
          </div>
        </modal-footer>
        <div slot="modal-footer">
          <b-button variant="light" @click="$bvModal.hide('one-article')"
            >OK</b-button
          >
        </div>
      </b-modal>
      <!-- article form modal -->
      <b-modal id="article-form" title="New Article">
        <form @submit.prevent="createArticle('data')">
          <div class="form-group">
            <label for="title">Title</label>
            <input
              v-model="newArticle.title"
              type="text"
              class="form-control"
              id="title"
              placeholder="Enter Title"
            />
          </div>
          <b-form-file
            placeholder="Choose a file..."
            drop-placeholder="Drop file here..."
          ></b-form-file>
          <div class="mt-3"></div>
          <ckeditor
            :editor="editor"
            v-model="newArticle.content"
            :config="editorConfig"
          ></ckeditor>
        </form>
        <div slot="modal-footer">
          <b-button variant="primary" @click="createArticle('data')"
            >Create!</b-button
          >
        </div>
      </b-modal>
      <div class="card text-center fixed-bottom" style="height:75px">
        <div class="card-body">
          <h4 class="card-title">Content</h4>
        </div>
      </div>
    </div>
    <script src="js/index.js"></script>
  </body>
</html>
